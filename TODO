* Union mapping and marshalling

* Reintroduce dynamic ir access

* test cases
